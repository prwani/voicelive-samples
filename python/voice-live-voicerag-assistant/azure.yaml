name: gbb-ai-voice-live-sdk
metadata:
  template: python-fastapi@latest
services:
  backend:
    project: ./app
    language: py
    host: containerapp
    docker:
      remoteBuild: true
infra:
  provider: bicep
  path: infra
hooks:
  postdeploy:
    posix:
      shell: sh
      run: |
        echo "Deployment complete"
        echo "Setting up environment variables..."
        chmod +x ./infra/scripts/set-env.sh ./infra/scripts/set-up-intvect.sh
        ./infra/scripts/set-env.sh
        echo "Setting up Index..."
        ./infra/scripts/set-up-intvect.sh
        echo ""
        echo "ðŸš€ Application deployed successfully!"
        echo "ðŸ“± Website URL: $WEBSITE_URL"
        echo ""
    windows:
      shell: pwsh
      run: |
        Write-Host "Deployment complete"
        Write-Host "Setting up environment variables..."
        .\infra\scripts\set-env.ps1
        Write-Host "Setting up Index..."
        .\infra\scripts\set-up-intvect.ps1
        Write-Host ""
        Write-Host "ðŸš€ Application deployed successfully!" -ForegroundColor Green
        Write-Host "ðŸ“± Website URL: $env:WEBSITE_URL" -ForegroundColor Cyan
        Write-Host ""